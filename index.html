<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Dream Art ‚Äî –¢–≤–æ—è –ò–ò –°—Ç—É–¥–∏—è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: radial-gradient(circle at top, #0f172a, #1e293b, #000000); min-height: 100vh; color: white; font-family: 'Inter', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 24px; }
        .neon-border { box-shadow: 0 0 15px rgba(56, 189, 248, 0.4); }
        .loader { border: 3px solid rgba(255,255,255,0.1); border-top: 3px solid #38bdf8; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; display: none; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .gallery-item { transition: transform 0.3s ease; }
        .gallery-item:hover { transform: scale(1.05); }
        input::placeholder { color: #64748b; }
    </style>
</head>
<body class="p-4 md:p-10">
    <div class="max-w-4xl mx-auto">
        <div class="glass p-6 md:p-10 shadow-2xl mb-8">
            <header class="text-center mb-8">
                <h1 class="text-4xl font-extrabold tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-300">AI DREAM ART</h1>
                <p class="text-slate-400 text-sm mt-2 font-light">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞ Pollinations.ai</p>
            </header>

            <div class="flex flex-col gap-4 mb-6">
                <input type="text" id="promptInput" placeholder="–û–ø–∏—à–∏—Ç–µ, —á—Ç–æ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º)..." class="w-full bg-slate-900/50 border border-slate-700 rounded-xl p-4 text-white focus:ring-2 focus:ring-blue-500 outline-none transition-all">

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm text-slate-300 mb-1">–ú–æ–¥–µ–ª—å</label>
                        <select id="modelSelect" class="w-full bg-slate-900/50 border border-slate-700 rounded-xl p-4 text-white focus:ring-2 focus:ring-blue-500 outline-none transition-all cursor-pointer">
                            <option value="flux">Flux (–õ—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ)</option>
                            <option value="turbo">Turbo (–ë—ã—Å—Ç—Ä–æ)</option>
                            <option value="zimage">Z-Image</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm text-slate-300 mb-1">API-–∫–ª—é—á (plln_sk_...)</label>
                        <div class="flex gap-3">
                            <input type="password" id="apiKeyInput" placeholder="–í–≤–µ–¥–∏ –∫–ª—é—á" class="flex-1 bg-slate-900/50 border border-slate-700 rounded-xl p-4 text-white focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                            <button onclick="saveApiKey()" class="bg-emerald-600 hover:bg-emerald-500 px-4 rounded-xl font-bold transition-all">üíæ</button>
                        </div>
                    </div>
                </div>

                <button onclick="generateImage()" id="genBtn" class="w-full bg-gradient-to-r from-blue-600 to-cyan-500 hover:from-blue-500 hover:to-cyan-400 p-4 rounded-xl font-bold transition-all active:scale-95 shadow-lg">–°–æ–∑–¥–∞—Ç—å —à–µ–¥–µ–≤—Ä</button>
            </div>

            <div class="mt-10 flex flex-col items-center">
                <div id="loader" class="loader mb-4"></div>
                <img id="resultImage" src="https://images.unsplash.com/photo-1620641788421-7a1c342ea42e?q=80&w=1000" class="rounded-2xl shadow-2xl max-h-[500px] w-full object-cover neon-border transition-opacity duration-500">
                
                <button id="downloadBtn" class="hidden mt-6 bg-slate-800 hover:bg-slate-700 border border-slate-600 text-white px-8 py-3 rounded-full font-bold transition-all flex items-center gap-2">
                    <span>‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</span>
                </button>
            </div>
        </div>

        <div class="glass p-6">
            <h3 class="text-xl font-bold mb-4 flex items-center gap-2"><span class="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></span> –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–∞–±–æ—Ç—ã</h3>
            <div id="gallery" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
        </div>

        <footer class="mt-10 text-center text-slate-500 text-xs">
            <p>¬© 2026 AI Dream Art. –ü–æ–ª—É—á–∏ –∫–ª—é—á –Ω–∞ <a href="https://enter.pollinations.ai" target="_blank" class="text-blue-400 hover:underline">enter.pollinations.ai</a></p>
        </footer>
    </div>

    <script>
        const gallery = document.getElementById('gallery');
        const MAX_GALLERY = 8;
        const COOLDOWN_MS = 5000; // –£–º–µ–Ω—å—à–∏–ª –∫—É–ª–¥–∞—É–Ω –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

        let isGenerating = false;
        let lastGeneratedTime = 0;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            loadGallery();
            document.getElementById('apiKeyInput').value = localStorage.getItem('pollinationsApiKey') || '';
        });

        function saveApiKey() {
            const key = document.getElementById('apiKeyInput').value.trim();
            if (key.startsWith('plln_') || key.startsWith('sk_')) {
                localStorage.setItem('pollinationsApiKey', key);
                alert('–ö–ª—é—á —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –±—Ä–∞—É–∑–µ—Ä–µ!');
            } else {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∫–ª—é—á.');
            }
        }

        async function generateImage() {
            if (isGenerating) return;

            const now = Date.now();
            if (now - lastGeneratedTime < COOLDOWN_MS) {
                alert(`–ü–æ–¥–æ–∂–¥–∏—Ç–µ –µ—â–µ ${Math.ceil((COOLDOWN_MS - (now - lastGeneratedTime))/1000)} —Å–µ–∫.`);
                return;
            }

            const prompt = document.getElementById('promptInput').value.trim();
            const apiKey = localStorage.getItem('pollinationsApiKey');

            if (!prompt) return alert('–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ!');
            if (!apiKey) return alert('–°–Ω–∞—á–∞–ª–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ API-–∫–ª—é—á!');

            // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            isGenerating = true;
            const btn = document.getElementById('genBtn');
            const imgEl = document.getElementById('resultImage');
            const loader = document.getElementById('loader');
            const downloadBtn = document.getElementById('downloadBtn');

            btn.disabled = true;
            btn.innerText = '–ù–µ–π—Ä–æ—Å–µ—Ç—å –¥—É–º–∞–µ—Ç...';
            loader.style.display = 'block';
            imgEl.style.opacity = '0.3';
            downloadBtn.classList.add('hidden');

            const model = document.getElementById('modelSelect').value;
            const seed = Math.floor(Math.random() * 1000000);
            const url = `https://gen.pollinations.ai/image/${encodeURIComponent(prompt)}?model=${model}&width=1024&height=1024&seed=${seed}&nologo=true`;

            try {
                const res = await fetch(url, {
                    headers: { 'Authorization': `Bearer ${apiKey}` }
                });

                if (!res.ok) throw new Error(`–û—à–∏–±–∫–∞: ${res.status}`);

                const blob = await res.blob();
                const objectUrl = URL.createObjectURL(blob);

                // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∞—Ä—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É –≤ –≥–∞–ª–µ—Ä–µ—é, –µ—Å–ª–∏ –æ–Ω–∞ –±—ã–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞
                if (imgEl.src && !imgEl.src.includes('unsplash')) {
                    addToGallery(imgEl.src);
                }

                // –û–±–Ω–æ–≤–ª—è–µ–º –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
                imgEl.src = objectUrl;
                imgEl.style.opacity = '1';
                
                // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
                downloadBtn.onclick = () => {
                    const a = document.createElement('a');
                    a.href = objectUrl;
                    a.download = `ai-art-${seed}.png`;
                    a.click();
                };
                downloadBtn.classList.remove('hidden');
                
                lastGeneratedTime = Date.now();
            } catch (err) {
                alert('–û—à–∏–±–∫–∞: ' + err.message);
            } finally {
                loader.style.display = 'none';
                btn.disabled = false;
                btn.innerText = '–°–æ–∑–¥–∞—Ç—å —à–µ–¥–µ–≤—Ä';
                isGenerating = false;
            }
        }

        function addToGallery(url) {
            const div = document.createElement('div');
            div.className = 'gallery-item';
            div.innerHTML = `<img src="${url}" class="rounded-lg shadow-lg cursor-pointer hover:opacity-80 w-full aspect-square object-cover" onclick="window.open('${url}', '_blank')">`;
            
            gallery.prepend(div);
            
            if (gallery.children.length > MAX_GALLERY) {
                gallery.lastChild.remove();
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫–∏ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ blob)
            // –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: blob-—Å—Å—ã–ª–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏. 
            // –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –≥–∞–ª–µ—Ä–µ–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –Ω—É–∂–Ω—ã –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏.
        }

        function loadGallery() {
            // –ú–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤, —á—Ç–æ–±—ã –≥–∞–ª–µ—Ä–µ—è –±—ã–ª–∞ –≤–µ—á–Ω–æ–π
        }
    </script>
</body>
</html>
